支付
=============2020.12.22=========

前提，申请开通微信支付 

开发
微信接口对接：
调用微信接口涉及处理的点
1算法签名 4-6小时
2成功处理逻辑 2-3小时
3失败处理逻辑 1小时 

后台:
4数据库增加线路和用户，用户支付信息数据库表，2小时
5提供插入支付信息接口 2小时
6提供查询信息接口 1小时

小程序页面:
7对线路进入进行接口验证和提示逻辑处理。2~3小时    ------------去掉，细化逻辑时间下面

微信接口调试测试，后台配置 预留2-4小时 

总共大约  16~22 小时 

更新  14-19

一个小程序，第二个重复开发代码抑制配置等预计一个要半天左右时间

=====================2021-01-16==============
更新需求
收费拆分 按照时间收费、按照线路收费：

1、按照时间收费
1.1、后台新增管理页面，时间、费用 管理涉及
1.1.1、后台管理页面功能：数据库新增两个字段，管理页面提供修改功能、展示数据功能两个接口。 3
1.1.2、提供查询接口，为小程序端页面和用户接口做逻辑判断使用 1
1.1.3、用户表新增字段，用于标记用户收费的有效期到哪天，修改与查询接口 2


2、线路收费
2.1、在线路上设置 几个点免费，新增字段，后台展示和修改功能，提供接口给前端小程序。2
2.2、统计用户在当前线路已经玩几个点后端接口，提供给小程序前端多出调用逻辑。1 
2.3、小程序页面做逻辑处理判断，线路是否收费、免费点数，用户已玩几个点逻辑处理。2

更新  14-19  + 11  大约 25-32


设置API密钥 ： bcc534f8f4c5967cf55844b7c0c1eae1
openid: oHq_k5La6tz61XQFaPq2jwiHYdMI
http://localhost:8080/qihntest//wx/wxPay?openid=oHq_k5La6tz61XQFaPq2jwiHYdMI&money=1&pname=%E6%B5%8B%E8%AF%95%E5%95%86%E5%93%81

0256 9965011  茅台镇 60年老窖  孙 

wxPay res  {"timeStamp":"1611372973","package":"prepay_id=wx2311361301200088a62dcccb1f8d8b0000","paySign":"23C78B7F5B60CE7AF617C1A5F3146DA4","appid":"wxb396476de17508d4","signType":"RSA","nonceStr":"zpqtfj60rhfp1wc3b07pti1yub00iuw6"}
detail.js:45 pay-success res  {"errMsg":"requestPayment:ok"}
